(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4730:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(4110)}])},4110:function(e,n,t){"use strict";t.r(n);var l=t(5893),i=t(7294),s=t(1163),r=t(2362),a=t(2301),o=t(2573),c=t(5415);let u=()=>{let[e,n]=(0,i.useState)(""),[t,u]=(0,i.useState)(""),[d,h]=(0,i.useState)(null),[x,j]=(0,i.useState)(""),[p,g]=(0,i.useState)(0),[v,m]=(0,i.useState)(!1),[f,b]=(0,i.useState)(""),[S,_]=(0,i.useState)(""),y=(0,s.useRouter)(),{currentUser:C}=(0,i.useContext)(c.V),F=e=>{e.target.files[0]&&h(e.target.files[0])},P=n=>{if(n.preventDefault(),!C||"percy@tuncar.dev"!==C.email){console.log("Acceso denegado");return}if(!x){console.log("Por favor sube una imagen antes de guardar el producto");return}let l=(0,o.hJ)(r.db,"products");(0,o.ET)(l,{title:e,price:t,image:x,size:f,gender:S}).then(()=>{console.log("Product added successfully!"),y.push("/")}).catch(e=>{console.error(e)})},w=()=>{if(!d){console.log("Por favor selecciona una imagen antes de subirla");return}m(!0);let e=(0,a.iH)(r.tO,"products/".concat(d.name)),n=(0,a.B0)(e,d);n.on("state_changed",e=>{let n=e.bytesTransferred/e.totalBytes*100;g(n)},e=>{console.error(e),m(!1)},()=>{(0,a.Jt)(n.snapshot.ref).then(e=>{j(e),m(!1)}).catch(e=>{console.error(e),m(!1)})})};return(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{children:"Admin Panel"}),(0,l.jsxs)("form",{onSubmit:P,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"title",children:"Title"}),(0,l.jsx)("input",{type:"text",id:"title",value:e,onChange:e=>n(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"price",children:"Price"}),(0,l.jsx)("input",{type:"number",id:"price",value:t,onChange:e=>u(e.target.value)})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"size",children:"Size"}),(0,l.jsxs)("select",{id:"size",value:f,onChange:e=>b(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"- Selecciona una talla -"}),(0,l.jsx)("option",{value:"S",children:"S"}),(0,l.jsx)("option",{value:"M",children:"M"}),(0,l.jsx)("option",{value:"L",children:"L"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"gender",children:"Gender"}),(0,l.jsxs)("select",{id:"gender",value:S,onChange:e=>_(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"- Selecciona un g\xe9nero -"}),(0,l.jsx)("option",{value:"Masculino",children:"Masculino"}),(0,l.jsx)("option",{value:"Femenino",children:"Femenino"}),(0,l.jsx)("option",{value:"Unisex",children:"Unisex"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{htmlFor:"image",children:"Image"}),(0,l.jsx)("input",{type:"file",id:"image",onChange:F})]}),v&&(0,l.jsx)("div",{children:(0,l.jsx)("progress",{value:p,max:"100"})}),!x&&(0,l.jsx)("div",{children:(0,l.jsx)("button",{type:"button",onClick:w,children:"Subir imagen"})}),x&&(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"La imagen ha sido subida correctamente:"}),(0,l.jsx)("img",{src:x,alt:"product"})]}),(0,l.jsx)("button",{type:"submit",disabled:!x,children:"Guardar producto"})]})]})};n.default=u}},function(e){e.O(0,[774,888,179],function(){return e(e.s=4730)}),_N_E=e.O()}]);